import{a as H,b as f,c as q,d as V,e as Q,g as w,h as K,i as W,j as X,k as $,l as J,m as Y,n as Z,o as ee,p as te,q as ie}from"./chunk-KZRNAA3W.js";import{a as ne}from"./chunk-BNBGW3HE.js";import{c as z,d as U,e as j}from"./chunk-I7EYBQ6P.js";import{h as F}from"./chunk-Z6FOPKOB.js";import{Ab as D,Cb as G,Eb as A,Gb as v,Ia as _,Ka as c,La as M,Ma as o,Na as r,Oa as m,Qa as P,R as y,Ra as O,Wa as g,Xa as b,Ya as u,Z as R,bb as B,cb as k,eb as N,fb as s,gb as d,m as I,ta as T,wa as L,ya as n,za as h}from"./chunk-6TON5MIY.js";var S=class t{constructor(){}lang=new I("en");static \u0275fac=function(a){return new(a||t)};static \u0275prov=y({token:t,factory:t.\u0275fac,providedIn:"root"})};var oe=()=>({standalone:!0}),le=(t,i)=>({"btn-invalid":t,"btn-valid":i});function ge(t,i){t&1&&(o(0,"p",33),m(1,"i",34),g(2),s(3,"translate"),r()),t&2&&(n(2),u(" ",d(3,1,"USERNAME_REQUIRED")," "))}function pe(t,i){t&1&&(o(0,"p"),m(1,"i",34),g(2),s(3,"translate"),r()),t&2&&(n(2),u(" ",d(3,1,"USERNAME_MINLENGTH")," "))}function se(t,i){t&1&&(o(0,"p"),m(1,"i",34),g(2),s(3,"translate"),r()),t&2&&(n(2),u(" ",d(3,1,"USERNAME_MAXLENGTH")," "))}function de(t,i){if(t&1&&(o(0,"div",31),_(1,ge,4,3,"p",32)(2,pe,4,3,"p",28)(3,se,4,3,"p",28),r()),t&2){let a,e,l,p=O();n(),c("ngIf",(a=p.registerGroup.get("first_name"))==null?null:a.getError("required")),n(),c("ngIf",(e=p.registerGroup.get("first_name"))==null?null:e.getError("minlength")),n(),c("ngIf",(l=p.registerGroup.get("first_name"))==null?null:l.getError("maxlength"))}}function me(t,i){t&1&&(o(0,"p",36),m(1,"i",34),g(2),s(3,"translate"),r()),t&2&&(n(2),u(" ",d(3,1,"EMAIL_REQUIRED")," "))}function ue(t,i){t&1&&(o(0,"p",36),m(1,"i",34),g(2),s(3,"translate"),r()),t&2&&(n(2),u(" ",d(3,1,"EMAIL_INVALID")," "))}function _e(t,i){if(t&1&&(o(0,"div",31),_(1,me,4,3,"p",35)(2,ue,4,3,"p",35),r()),t&2){let a,e,l=O();n(),c("ngIf",(a=l.registerGroup.get("email"))==null?null:a.getError("required")),n(),c("ngIf",(e=l.registerGroup.get("email"))==null?null:e.getError("email"))}}function fe(t,i){t&1&&(o(0,"p",36),m(1,"i",34),g(2),s(3,"translate"),r()),t&2&&(n(2),u(" ",d(3,1,"PHONE_REQUIRED")," "))}function he(t,i){t&1&&(o(0,"p",38),m(1,"i",34),g(2),s(3,"translate"),r()),t&2&&(n(2),u(" ",d(3,1,"PHONE_PATTERN")," "))}function xe(t,i){if(t&1&&(o(0,"div",31),_(1,fe,4,3,"p",35)(2,he,4,3,"p",37),r()),t&2){let a,e,l=O();n(),c("ngIf",(a=l.registerGroup.get("phone"))==null?null:a.getError("required")),n(),c("ngIf",(e=l.registerGroup.get("phone"))==null?null:e.getError("pattern"))}}function Ce(t,i){t&1&&(o(0,"span"),m(1,"i",39),r())}var re=class t{constructor(i,a,e,l,p,x){this._ChatsService=i;this._Router=a;this.translate=e;this._langService=l;this._UserDATAService=p;this.platformId=x;if(this.translate.addLangs(["en","ar"]),this.translate.setDefaultLang("en"),v(this.platformId)){let C="en",E=localStorage.getItem("lang");(E==="ar"||E==="en")&&(C=E),this.translate.use(C),this.currentLang=C,this.isRTL=C==="ar",document.documentElement.dir=this.isRTL?"rtl":"ltr",document.documentElement.lang=C}}err="";load=!1;currentLang="en";registerGroup=new Q({first_name:new w("",[f.required,f.minLength(3),f.maxLength(20)]),email:new w("",[f.required,f.email]),phone:new w("+973",[f.required,f.pattern(/^\+973[367]\d{7}$/)])});isRTL=!1;selectedLanguage="en";handle(){this.load=!0;let i=this.registerGroup.value;this.registerGroup.valid&&this._ChatsService.register(i).subscribe({next:a=>{this._UserDATAService.setUsername(a.user.first_name),v(this.platformId)&&(localStorage.setItem("token",a.access_token),localStorage.setItem("refresh",a.refresh_token),localStorage.setItem("user_id",a.user.pk)),this._ChatsService.decodeDate(),this._Router.navigate(["blank/chat"]).then(()=>{this._ChatsService.createNewChat().subscribe({next:e=>{v(this.platformId)&&(localStorage.setItem("chatId",e.id),console.log(e.id)),this._ChatsService.connectToWebSocket()},error:e=>{console.error("Failed to create new chat:",e),this.load=!1}})})},error:a=>{console.error("Registration failed:",a),this.load=!1}})}enforcePrefix(i){let e=this.registerGroup.get("phone")?.value||"";(i.key==="Backspace"||i.key==="Delete")&&e.length<=4&&i.preventDefault();let l=i.target;l.selectionStart&&l.selectionStart<4&&(i.preventDefault(),setTimeout(()=>{l.setSelectionRange(e.length,e.length)}))}switchLanguage(i){this._langService.lang.next(i),i&&(this.translate.use(i),this.isRTL=i==="ar",v(this.platformId)&&(document.documentElement.dir=this.isRTL?"rtl":"ltr",document.documentElement.lang=i,localStorage.setItem("lang",i))),this.load=!1}static \u0275fac=function(a){return new(a||t)(h(ne),h(F),h(z),h(S),h(ie),h(T))};static \u0275cmp=R({type:t,selectors:[["app-register"]],standalone:!0,features:[B],decls:56,vars:53,consts:[[1,"register","w-100","text-white"],[1,"main"],[1,"chat-nav","p-4"],[1,"nav-left"],["src","../../../assets/logoHamad.png","alt","Batelco Logo",1,"logo"],[1,"container"],[1,"greeting-text"],[1,"greeting",3,"dir"],[1,"assistant-intro",3,"dir"],[1,"form-container"],[3,"dir"],[1,"form-title"],[3,"ngSubmit","formGroup"],[1,"row"],[1,"col-lg-6","col-md-12"],[1,"form-group"],["type","text","formControlName","first_name",1,"form-control",3,"placeholder","dir"],["class","error",4,"ngIf"],["type","email","formControlName","email",1,"form-control",3,"placeholder","dir"],[1,"password-container"],["type","tel","formControlName","phone",1,"form-control",3,"keydown","placeholder","dir"],[1,"col-md-6","language-select-container"],[1,"language-select"],[3,"ngModelChange","ngModel","ngModelOptions"],["value","en",1,"text-black"],["value","ar",1,"text-black"],[1,"registration-container","flex-column"],[1,"register-button",3,"ngClass","disabled","dir"],[4,"ngIf"],[1,"col-md-6","language-select-container01"],["alt","",1,"imgBasma",3,"src"],[1,"error"],["class","m-0",4,"ngIf"],[1,"m-0"],[1,"fa-solid","fa-triangle-exclamation","ps-1"],["class","m-0 my-1",4,"ngIf"],[1,"m-0","my-1"],["class","error01",4,"ngIf"],[1,"error01"],[1,"fas","fa-spin","fa-spinner"]],template:function(a,e){if(a&1&&(o(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3),m(4,"img",4),r()(),o(5,"div",5)(6,"div",6)(7,"div",7),g(8),s(9,"translate"),r(),o(10,"div",8),g(11),s(12,"translate"),r()(),o(13,"div",9)(14,"div",10)(15,"div",11),g(16),s(17,"translate"),r()(),o(18,"form",12),P("ngSubmit",function(){return e.handle()}),o(19,"div",13)(20,"div",14)(21,"div",15),m(22,"input",16),s(23,"translate"),_(24,de,4,3,"div",17),r()(),o(25,"div",14)(26,"div",15),m(27,"input",18),s(28,"translate"),_(29,_e,3,2,"div",17),r()(),o(30,"div",14)(31,"div",15)(32,"div",19)(33,"input",20),s(34,"translate"),P("keydown",function(p){return e.enforcePrefix(p)}),r(),_(35,xe,3,2,"div",17),r()()(),o(36,"div",21)(37,"div",22)(38,"select",23),P("ngModelChange",function(p){return e.switchLanguage(p)}),o(39,"option",24),g(40,"\u{1F310} English"),r(),o(41,"option",25),g(42,"\u{1F310} \u0627\u0644\u0639\u0631\u0628\u064A\u0629"),r()()()()(),o(43,"div",26)(44,"button",27),g(45),s(46,"translate"),_(47,Ce,2,0,"span",28),r(),o(48,"div",29)(49,"div",22)(50,"select",23),P("ngModelChange",function(p){return e.switchLanguage(p)}),o(51,"option",24),g(52,"\u{1F310} English"),r(),o(53,"option",25),g(54,"\u{1F310} \u0627\u0644\u0639\u0631\u0628\u064A\u0629"),r()()()()()()()(),m(55,"img",30),r()()),a&2){let l,p,x;n(4),M("ar",e.isRTL),n(3),c("dir",e.isRTL?"rtl":"ltr"),n(),b(d(9,34,"GREETING")),n(2),c("dir",e.isRTL?"rtl":"ltr"),n(),b(d(12,36,"ASSISTANT_INTRO")),n(3),c("dir",e.isRTL?"rtl":"ltr"),n(2),b(d(17,38,"FORM_TITLE")),n(2),c("formGroup",e.registerGroup),n(4),c("placeholder",d(23,40,"USERNAME_PLACEHOLDER"))("dir",e.isRTL?"rtl":"ltr"),n(2),c("ngIf",((l=e.registerGroup.get("first_name"))==null?null:l.errors)&&((l=e.registerGroup.get("first_name"))==null?null:l.touched)),n(3),c("placeholder",d(28,42,"EMAIL_PLACEHOLDER"))("dir",e.isRTL?"rtl":"ltr"),n(2),c("ngIf",((p=e.registerGroup.get("email"))==null?null:p.errors)&&((p=e.registerGroup.get("email"))==null?null:p.touched)),n(4),c("placeholder",d(34,44,"PHONE_PLACEHOLDER"))("dir",e.isRTL?"rtl":"ltr"),n(2),c("ngIf",((x=e.registerGroup.get("phone"))==null?null:x.errors)&&((x=e.registerGroup.get("phone"))==null?null:x.touched)),n(),M("ar",e.isRTL),n(2),c("ngModel",e.currentLang)("ngModelOptions",k(48,oe)),n(6),M("ar",e.isRTL),c("ngClass",N(49,le,!e.registerGroup.valid,e.registerGroup.valid))("disabled",e.registerGroup.invalid)("dir",e.isRTL?"rtl":"ltr"),n(),u(" ",d(46,46,"LOGIN_BTN")," "),n(2),c("ngIf",e.load),n(3),c("ngModel",e.currentLang)("ngModelOptions",k(52,oe)),n(5),M("ar",e.isRTL),c("src",e.isRTL==!1?"../../../assets/hamadEn-removebg-preview.png":"../../../assets/rashedArabic-removebg-preview.png",L)}},dependencies:[A,D,G,te,W,Y,Z,H,J,q,V,X,$,j,U,ee,K],styles:['@charset "UTF-8";.container[_ngcontent-%COMP%]{width:100%;max-width:800px;padding:40px;border-radius:12px}h1[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:30px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-control[_ngcontent-%COMP%]{width:100%;padding:15px;border:1px solid #FFFFFF;border-radius:8px;color:#fff;font-size:1rem;box-sizing:border-box}input[_ngcontent-%COMP%]::placeholder{color:#fff!important}.language-select-container[_ngcontent-%COMP%]{text-align:end}.language-select-container.ar[_ngcontent-%COMP%]{text-align:start}.language-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:transparent;border:1px solid #c62929;border-radius:12px;color:#fff;padding:7px 1px}.checkbox-container[_ngcontent-%COMP%]{display:flex;align-items:flex-start;margin-bottom:25px;margin-right:10px}.checkBox-title[_ngcontent-%COMP%]{width:fit-content}.checkbox-container[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.custom-checkbox[_ngcontent-%COMP%]{width:19px;height:19px;background-color:transparent;border:1px solid #cb444a;border-radius:4px;display:flex;align-items:center;justify-content:center;color:#fff;cursor:pointer}.checkbox-container[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .custom-checkbox[_ngcontent-%COMP%]{background-color:#cb444a}.checkbox-container[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .custom-checkbox[_ngcontent-%COMP%]:after{content:"\\2713";display:block}.terms-link[_ngcontent-%COMP%]{color:#fff;text-decoration:underline}.register-button[_ngcontent-%COMP%]{transition:background-color .3s ease;padding:10px 16px;border-radius:8px;border:1px solid #ffffff}.register-button.btn-invalid[_ngcontent-%COMP%]{background-color:transparent;color:#fff;cursor:not-allowed}.register-button.btn-valid[_ngcontent-%COMP%]{background-color:#fff;color:#c91041;cursor:pointer}.language-selector[_ngcontent-%COMP%]{padding:3px 14px;background-color:transparent;border:1px solid #cb444a;border-radius:8px;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:6px;font-size:16px;float:right;margin-right:10px;margin-top:3px}.language-select-container01[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{display:none;background-color:transparent;border:1px solid #c62929;border-radius:12px;color:#fff;padding:7px 1px}.registration-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.esraa[_ngcontent-%COMP%]{background-color:#c62929}.imgBasma[_ngcontent-%COMP%]{position:absolute;left:60%;width:auto;height:100vh;bottom:0;pointer-events:none}.imgBasma.ar[_ngcontent-%COMP%]{left:-1%}@media (max-width: 1400px){.imgBasma.ar[_ngcontent-%COMP%]{left:-22%}.main[_ngcontent-%COMP%]{width:80%}.language-selector01[_ngcontent-%COMP%]{margin-right:10px;display:none}.nav-left[_ngcontent-%COMP%]{margin-top:3px}.language-selector[_ngcontent-%COMP%]{margin-top:15px;width:auto;float:left}}@media (max-width: 1200px){.language-select-container[_ngcontent-%COMP%]{text-align:left}}@media (max-width: 1000px){.main[_ngcontent-%COMP%]{width:90%}.language-selector[_ngcontent-%COMP%]{display:none}.registration-container[_ngcontent-ng-c1748080431][_ngcontent-%COMP%]{width:50%;align-items:flex-start}.register-button[_ngcontent-%COMP%]{height:55%;width:37%;margin:0;background:#d9d5db;padding:4px}.container[_ngcontent-%COMP%]{padding:0;width:75%}.imgBasma[_ngcontent-%COMP%]{left:45%;bottom:-46px}.form-control[_ngcontent-%COMP%]{width:70%!important}.imgBasma.ar[_ngcontent-%COMP%]{left:0%}.form-container[_ngcontent-%COMP%]{padding:10px 12px}.language-selector01[_ngcontent-%COMP%]{margin-top:15px;float:none;display:flex}.language-select-container[_ngcontent-ng-c1748080431][_ngcontent-ng-c1748080431][_ngcontent-%COMP%]   select[_ngcontent-ng-c1748080431][_ngcontent-ng-c1748080431][_ngcontent-%COMP%]{width:40%;margin-bottom:9px}}@media (max-width: 780px){.main[_ngcontent-%COMP%]{width:90%}.greeting[_ngcontent-%COMP%]{font-size:24px}.assistant-intro[_ngcontent-%COMP%]{font-size:16px}.form-group[_ngcontent-%COMP%]{margin-bottom:10px}.form-control[_ngcontent-%COMP%]{padding:10px}.register-button[_ngcontent-%COMP%]{width:62%}.registration-container[_ngcontent-%COMP%], .checkBox-title[_ngcontent-%COMP%]{width:70%}.checkBox-title[_ngcontent-%COMP%]{font-size:13px;width:50%}.custom-checkbox[_ngcontent-%COMP%]{height:16px;width:16px}.container[_ngcontent-%COMP%]{margin-top:-15%}.imgBasma[_ngcontent-%COMP%]{left:30%;bottom:0;height:78%}.form-title[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:20px}}@media (max-width: 700px){.form-title[_ngcontent-%COMP%]{font-size:16px;width:95%}.form-control[_ngcontent-%COMP%]{height:35px}.register-button[_ngcontent-%COMP%]{width:60%}}@media (max-width: 500px){.greeting-text[_ngcontent-%COMP%]{margin-bottom:10px}.container[_ngcontent-%COMP%]{width:90%;margin-inline:auto}.form-title[_ngcontent-%COMP%]{font-size:16px;width:95%}.form-control[_ngcontent-%COMP%]{height:35px}.register-button[_ngcontent-%COMP%]{width:75%}.register-button.ar[_ngcontent-%COMP%]{width:55%}.registration-container[_ngcontent-ng-c1748080431][_ngcontent-%COMP%], .checkBox-title[_ngcontent-ng-c1748080431][_ngcontent-%COMP%]{width:45%}.imgBasma.ar[_ngcontent-%COMP%]{left:-43%}.language-select-container[_ngcontent-ng-c1748080431][_ngcontent-%COMP%]   select[_ngcontent-ng-c1748080431][_ngcontent-%COMP%]{padding:3px 1px;margin-bottom:10px}.registration-container[_ngcontent-%COMP%]{flex-direction:column}.checkBox-title[_ngcontent-%COMP%]{width:60%;font-size:12px}.checkbox-container[_ngcontent-%COMP%]{align-items:normal}.imgBasma[_ngcontent-%COMP%]{left:33%;bottom:1%;height:76%}.logo[_ngcontent-%COMP%]{margin-left:63%;margin-right:8%;margin-top:5%}.logo.ar[_ngcontent-%COMP%]{margin-left:70%}.register-button.ar[_ngcontent-ng-c1748080431][_ngcontent-%COMP%]{width:70%}}@media (max-width: 380px){.checkbox-container.rtl[_ngcontent-%COMP%]   .checkBox-title[_ngcontent-%COMP%]{order:0;width:fit-content}.checkbox-container[_ngcontent-%COMP%]{align-items:center;margin-bottom:9px}.logo[_ngcontent-%COMP%]{height:49px;margin-top:3%}.logo.ar[_ngcontent-%COMP%]{margin-top:3%}.error01[_ngcontent-%COMP%]{width:290px}.checkbox-container[_ngcontent-%COMP%]{width:73%}.imgBasma[_ngcontent-%COMP%]{left:100px;bottom:24px;height:70%}.imgBasma.ar[_ngcontent-%COMP%]{left:-36%;height:63%}.imgBasma[_ngcontent-%COMP%]   .imgBasma.ar[_ngcontent-%COMP%]{left:-29%;bottom:-21px}.custom-checkbox[_ngcontent-%COMP%]{height:15px;width:15px}p[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0}.error[_ngcontent-%COMP%]{width:190px;font-size:12px}.register-button[_ngcontent-%COMP%]{width:56%}.imgBasma.ar[_ngcontent-%COMP%]{left:-22%;height:65%}.language-select-container[_ngcontent-%COMP%]{display:none}.language-select-container01[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{display:block;margin-top:8px;padding:3px}.register-button[_ngcontent-ng-c1378080944][_ngcontent-%COMP%]{width:60%}[dir=rtl][_ngcontent-%COMP%]   .form-title[_ngcontent-%COMP%]{font-size:14px;width:100%;text-align:end}}@media (max-width: 330px){.form-title[_ngcontent-%COMP%]{font-size:14px;width:95%}.form-control[_ngcontent-%COMP%]{height:33px}.register-button[_ngcontent-%COMP%]{width:75%}.registration-container[_ngcontent-%COMP%]{flex-direction:column}.checkBox-title[_ngcontent-%COMP%]{font-size:12px;width:fit-content}.imgBasma[_ngcontent-%COMP%]{left:29%;bottom:-130px;height:89vh}.container[_ngcontent-%COMP%]{width:90%}}[dir=rtl][_ngcontent-%COMP%]   .custom-checkbox[_ngcontent-%COMP%]{margin-left:0;cursor:pointer}.checkbox-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.checkbox-container[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{order:0}.checkbox-container.rtl[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{order:2}.checkbox-container.rtl[_ngcontent-%COMP%]   .custom-checkbox[_ngcontent-%COMP%]{order:1}.checkbox-container.rtl[_ngcontent-%COMP%]   .checkBox-title[_ngcontent-%COMP%]{order:0}.checkbox-container[_ngcontent-%COMP%]   .checkbox-container.rtl.checkBox-title[_ngcontent-%COMP%]{order:0;width:fit-content!important}.checkbox-container.rtl[_ngcontent-%COMP%]{width:73%;order:0;align-items:normal}']})};export{re as RegisterComponent};
